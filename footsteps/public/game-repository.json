{
  "$schema": "./schemas/game-repository-schema.json",
  "games": {
    "magic-trifle": {
      "id": "magic-trifle",
      "title": "Nanny's Magic Trifle",
      "modules": {
        "camera": {
          "enabled": false
        }
      },
      "config": {
        "sequential": true,
        "autoAdvanceStages": false
      },
      "resources": {
        "title-background": { "type": "local", "target": "games/magic-trifle/title/background.png" },
        "title-foreground": { "type": "local", "target": "games/magic-trifle/title/foreground.png" },
        "blank-river": { "type": "local", "target": "games/magic-trifle/overview/blank-river.png" },
        "stepping-stone": { "type": "local", "target": "games/magic-trifle/overview/stepping-stone.png" },
        "star": { "type": "local", "target": "games/magic-trifle/overview/star-2.gif" },
        "bells": { "type": "local", "target": "games/magic-trifle/bells.mp3" },
        "tape-still": { "type": "local", "target": "games/magic-trifle/tape-still.png" },
        "tape-motion": { "type": "local", "target": "games/magic-trifle/tape-motion.gif" },
        "end-music": { "type": "local", "target": "games/magic-trifle/arrival-of-a-princess.mp3" },
        "end-magic-still": { "type": "local", "target": "games/magic-trifle/magic-explosion-2.webp" },
        "end-magic-motion": { "type": "local", "target": "games/magic-trifle/magic-explosion-2.webp" },
        "piano-keyboard-key": { "type": "local", "target": "games/magic-trifle/piano-keyboard-key.png" }
      },
      "displays": [
        {
          "purpose": "game-overview-title",
          "component": {
            "type": "template",
            "foregroundTemplate": {
              "sourceType": "relative",
              "templateSource": "games/magic-trifle/title/foreground.mustache"
            },
            "foregroundTemplateStyle": { "width": "100%", "height": "100%" },
            "backgroundTemplate": {
              "sourceType": "embedded",
              "content": ""
            },
            "backgroundStyle": {
              "background": "black",
              "backgroundImage": "url('{{resources.title-background}}')",
              "backgroundSize": "cover",
              "backgroundPosition": "center"
            },
            "data": {}
          }
        },
        {
          "purpose": "game-overview-stages",
          "component": {
            "type": "template",
            "foregroundTemplate": {
              "sourceType": "relative",
              "templateSource": "games/magic-trifle/overview/foreground.mustache"
            },
            "foregroundTemplateStyle": { "width": "100%", "height": "100%" },
            "backgroundTemplate": {
              "sourceType": "embedded",
              "content": ""
            },
            "backgroundTemplateStyle": { "width": "100%", "height": "100%" },
            "backgroundStyle": {
              "background": "black",
              "backgroundImage": "url('{{resources.blank-river}}')",
              "backgroundSize": "cover",
              "backgroundPosition": "center"
            },
            "data": {}
          },
          "clickIdToStageId": {
            "stages-link-stage-1": "stage-1",
            "stages-link-stage-2": "stage-2",
            "stages-link-stage-3": "stage-3",
            "stages-link-stage-4": "stage-4",
            "stages-link-stage-5": "stage-5",
            "stages-link-stage-6": "stage-6",
            "stages-link-stage-7": "stage-7"
          }
        }
      ],
      "stages": [
        {
          "id": "stage-1",
          "displays": [
            {
              "purpose": "shared",
              "component": {
                "type": "template",
                "foregroundTemplate": {
                  "sourceType": "relative",
                  "templateSource": "games/magic-trifle/overview/foreground.mustache"
                },
                "foregroundTemplateStyle": { "width": "100%", "height": "100%" },
                "backgroundTemplate": {
                  "sourceType": "embedded",
                  "content": ""
                },
                "backgroundTemplateStyle": { "width": "100%", "height": "100%" },
                "backgroundStyle": {
                  "background": "black",
                  "backgroundImage": "url('{{resources.blank-river}}')",
                  "backgroundSize": "cover",
                  "backgroundPosition": "center"
                },
                "data": {}
              }
            }
          ],
          "challenges": [
            {
              "id": "stage-1-challenge-1",
              "displays": [
                {
                  "purpose": "challenge-in-progress",
                  "component": {
                    "type": "scroll",
                    "data": {},
                    "contents": [
                      {
                        "text": "Didi the Duck wants to help you, it’s true,\nShe knows one of the ingredients, too!\nShe’s hiding inside a cold little box,\nGood luck, clever friends, undoing the locks!"
                      },
                      {
                        "text": "The code to the lock is easy to find\nWhat’s the smallest number that comes to mind?",
                        "showInput": true,
                        "label": "What ingredient does Didi know?"
                      }
                    ]
                  }
                }
              ],
              "solution": {
                "answers": ["LOVE"],
                "hints": []
              }
            }
          ]
        },
        {
          "id": "stage-2",
          "challenges": [
            {
              "id": "stage-2-challenge-1",
              "displays": [
                {
                  "purpose": "challenge-in-progress",
                  "component": {
                    "type": "scroll",
                    "data": {},
                    "contents": [
                      {
                        "text": "Split into teams with a leader to turn to!\nAvery's team one, and Eden's team two\nSo Ernie's team three\nwith the twins, you see!\nFollow directions, and stick to the plan\nStand on the cross to find the scroll, it's a counting game, so count what you can.\nNOW GO TO YOUR ROOM!"
                      },
                      {
                        "text": "You've counted them up, and found the sum,\ncongratulations, the puzzle's half-done!\nLook for a poster to give you a key,\nand transform your numbers into A-B-Cs"
                      },
                      {
                        "text": "There's 3 different letters, so what did you find?\nIt's a word we need, with those letters combined!",
                        "showInput": true,
                        "label": "What's the second ingredient?"
                      }
                    ]
                  }
                }
              ],
              "solution": {
                "answers": ["JOY"],
                "hints": []
              }
            }
          ]
        },
        {
          "id": "stage-3",
          "challengeChunking": 2,
          "challenges": [
            {
              "id": "stage-3-challenge-1",
              "displays": [
                {
                  "purpose": "challenge-in-progress",
                  "component": {
                    "type": "scroll",
                    "data": {},
                    "contents": [
                      {
                        "text": "Into the hall, you need to go\nTo where the shoes are on show.\nFind a sock that's big and red\nPull out a clue, and use your head!"
                      },
                      {
                        "text": "Some of the squares are specially highlighted\nWhen you figure this out, Nanny's delighted!\nIt's half the ingredient to go on our list\nSo tell us now, the magic ingredient we've missed!",
                        "showInput": true,
                        "label": "What's the first half of ingredient 3?"
                      }
                    ]
                  }
                }
              ],
              "solution": {
                "answers": ["RAIN"],
                "hints": []
              }
            },
            {
              "id": "stage-3-challenge-2",
              "displays": [
                {
                  "purpose": "challenge-in-progress",
                  "component": {
                    "type": "scroll",
                    "data": {},
                    "contents": [
                      {
                        "text": "The page you found has a secret key\nYou'll need it to unlock the next part, you see!\nEach number's disguised, and you'll need to find three\nTo get this ingredient for Nanny's recipe."
                      },
                      {
                        "text": "On the bookshelf where many tales stand\nFind a book about Alice in Wonderland\nWith the secret code, the book opens wide\nWhat's special about the mystery inside?",
                        "showInput": true,
                        "label": "What's the second half of ingredient 3?"
                      }
                    ]
                  }
                }
              ],
              "solution": {
                "answers": ["BOW"],
                "hints": []
              }
            }
          ]
        },
        {
          "id": "stage-4",
          "challenges": [
            {
              "id": "stage-4-challenge-1",
              "displays": [
                {
                  "purpose": "challenge-in-progress",
                  "component": {
                    "type": "scroll",
                    "data": {},
                    "contents": [
                      {
                        "showInput": true,
                        "text": "A tiny piano hides down low,\nListen close - it has something to show.\nA colourful picture is part of it too,\nJoin all the clues and the answer will come to you!",
                        "label": "What magic ingredient can you hear?",
                        "media": {
                          "type": "audio",
                          "resource": "bells",
                          "stillImageResource": "piano-keyboard-key",
                          "motionImageResource": "piano-keyboard-key"
                        }
                      }
                    ]
                  }
                }
              ],
              "solution": {
                "answers": ["BELLS"],
                "hints": []
              }
            }
          ]
        },

        {
          "id": "stage-5",
          "challenges": [
            {
              "id": "stage-5-challenge-1",
              "displays": [
                {
                  "purpose": "challenge-in-progress",
                  "component": {
                    "type": "scroll",
                    "data": {},
                    "contents": [
                      {
                        "text": "Search the Christmas tree, high and low\nThree little watches are hiding - go slow!\nFind all three watches and bring them back here\nThe big hand will make the secret clear"
                      },
                      {
                        "text": "Look around to help you do better\nand turn those numbers into letters!\nIt's the fifth magic ingredient that we need to make\nNanny's trifle, so tell us now, for goodness' sake!",
                        "showInput": true,
                        "label": "What's the fifth ingredient?"
                      }
                    ]
                  }
                }
              ],
              "solution": {
                "answers": ["WISHES"],
                "hints": []
              }
            }
          ]
        },
        {
          "id": "stage-6",
          "challenges": [
            {
              "id": "stage-6-challenge-1",
              "displays": [
                {
                  "purpose": "challenge-in-progress",
                  "component": {
                    "type": "scroll",
                    "data": {},
                    "contents": [
                      {
                        "text": "Auntie Laura's got a secret cipher\nTo help unlock the box beside her..."
                      },
                      {
                        "text": "Three symbols will open the locks\nSo you can get at what's in the box!\nEden, Avery, Ernest are a winning combination\nor Vicki, Morgan, Harriet...\nor Ashley, Nanny, Rich...\nIt's not just my imagination!\n(☂️ = 8)",
                        "showInput": true,
                        "label": "What's in the box?"
                      }
                    ]
                  }
                }
              ],
              "solution": {
                "answers": ["STARS"],
                "hints": []
              }
            }
          ]
        },
        {
          "id": "stage-7",
          "challenges": [
            {
              "id": "stage-7-challenge-1",
              "displays": [
                {
                  "purpose": "challenge-in-progress",
                  "component": {
                    "type": "scroll",
                    "data": {},
                    "contents": [
                      {
                        "text": "In the playroom, look around\nA wooden box can soon be found.\nOn the front, a Christmas tree\nThat's the box that unlocks, with your new key!\n(Bring it back to me...)"
                      },
                      {
                        "text": "You've found the last part, now don't delay!\nReveal the recipe and save the day!"
                      },
                      {
                        "text": "Nanny's Magic Trifle recipe\nSpin a rainbow\nJump with joy\nRing the bells\nSprinkle with stars\nStir with love\nMake a wish\nMagic trifle... appear!"
                      },
                      {
                        "text": "One more time!\nSpin a rainbow\nJump with joy\nRing the bells\nSprinkle with stars\nStir with love\nMake a wish\nMagic trifle... appear!"
                      },
                      {
                        "text": "Spin a rainbow\nJump with joy\nRing the bells\nSprinkle with stars\nStir with love\nMake a wish\nMagic trifle... appear!",
                        "media": {
                          "type": "audio",
                          "resource": "end-music",
                          "stillImageResource": "end-magic-still",
                          "motionImageResource": "end-magic-motion"
                        }
                      }
                    ]
                  }
                }
              ],
              "solution": {
                "answers": ["END"],
                "hints": []
              }
            }
          ]
        }
      ],
      "gameContainerStyle": {
        "backgroundColor": "#222222",
        "borderRadius": "20px",
        "boxShadow": "rgba(0, 0, 0, 0.12) 0px 1px 3px, rgba(0, 0, 0, 0.24) 0px 1px 2px"
      }
    }
  }
}
